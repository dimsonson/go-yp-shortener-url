syntax = "proto3";

package proto;

option go_package = "internal/app/api/grpc/proto";

/*
key string, 
value string, 
userid string,
existKey string,

models.BatchRequest,
dcCorr models.BatchRequest,
err error
*/




message PutRequest {
    string key = 1;
    string value = 2;
    string userid = 3;
  }

message PutResponse {
    string existKey = 1;
    string error = 2; // ошибка
  }


message BatchRequest {
    string CorrelationID = 1;
	string OriginalURL = 2;
	string ShortURL = 3;
}

message PutBatchRequest {
    BatchRequest dc = 1;
    string userid = 2;
  }


message PutBatchResponse {
    BatchRequest dcCorr = 1;
    string error = 2; // ошибка
  }

service Put {
    rpc Put(PutRequest) returns (PutResponse);
    rpc PutBatch(PutBatchRequest) returns (PutBatchResponse);
  }
  


/*



message User {
  string name = 1; // имя пользователя
  enum Sex {
      UNSPECIFIED = 0;
      MALE = 1;
      FEMALE = 2;
  }
  // (1) добавьте поля для пола и email
  Sex sex = 2;      // пол
  string email = 3; // email

}

message AddUserRequest {
  User user = 1;
}

message AddUserResponse {
  string error = 1; // ошибка
}

message ListUsersRequest {
  int32 offset = 1; // смещение выборки
  int32 limit = 2;  // количество элементов
}

message ListUsersResponse {
  int32 count = 1; // общее количество пользователей
  // (2) добавьте поле для списка email
  repeated string emails = 2; // список email
}

message GetUserRequest {
  string email = 1;
}

message GetUserResponse {
  User   user = 1;
  string error = 2;
}

// (3) добавьте DelUserRequest
message DelUserRequest {
    string email = 1;
}

message DelUserResponse {
  string error = 1;
}

service Users {
  rpc AddUser(AddUserRequest) returns (AddUserResponse);
  rpc ListUsers(ListUsersRequest) returns (ListUsersResponse);
  rpc GetUser(GetUserRequest) returns (GetUserResponse);
  // (4) добавьте интерфейс DelUser
  rpc DelUser(DelUserRequest) returns (DelUserResponse);
}


*/

/*
protoc --go_out=. --go_opt=paths=source_relative \
  --go-grpc_out=. --go-grpc_opt=paths=source_relative \
  adder.proto
*/